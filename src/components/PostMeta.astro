---
import { Icon } from "astro-icon/components";
import { formatDateToYYYYMMDD } from "../utils/date-utils";

interface Props {
  class?: string;
  published: Date;
  updated?: Date;
  words?: number;
  minutes?: number;
  hideUpdateDate?: boolean;
  slug?: string;
}
const {
  published,
  updated,
  words,
  minutes,
  hideUpdateDate = false,
} = Astro.props as Props;
const className = Astro.props.class as string || "";

// 格式化數字 (千分位)，使用繁體格式
const nf = new Intl.NumberFormat("zh-TW");

const publishedStr = published ? formatDateToYYYYMMDD(published) : "";
const updatedStr = updated ? formatDateToYYYYMMDD(updated) : "";
---
<div class:list={["flex flex-wrap text-neutral-500 dark:text-neutral-400 items-center gap-3 gap-y-2", className]}>
  <!-- publish date -->
  {publishedStr && (
    <div class="flex items-center gap-2 whitespace-nowrap">
      <div class="meta-icon">
        <!-- 與時間圖樣相同色系的 icon -->
        <Icon name="material-symbols:calendar-today-outline-rounded" class="text-[var(--primary)] text-xl" />
      </div>
      <span class="text-50 text-sm font-medium">{publishedStr}</span>
    </div>
  )}

  <!-- update date -->
  {!hideUpdateDate && updated && updated.getTime() !== published.getTime() && (
    <div class="flex items-center gap-2 whitespace-nowrap">
      <div class="meta-icon">
        <Icon name="material-symbols:edit-calendar-outline-rounded" class="text-[var(--primary)] text-xl" />
      </div>
      <span class="text-50 text-sm font-medium">{updatedStr}</span>
    </div>
  )}

  <!-- words -->
  {typeof words === "number" && (
    <div class="flex items-center gap-2 whitespace-nowrap">
      <div class="meta-icon">
        <!-- 文章/字數圖示，色系同時間 -->
        <Icon name="material-symbols:article" class="text-[var(--primary)] text-xl" />
      </div>
      <span class="text-50 text-sm font-medium">{nf.format(words)}字</span>
    </div>
  )}

  <!-- minutes -->
  {typeof minutes === "number" && (
    <div class="flex items-center gap-2 whitespace-nowrap">
      <div class="meta-icon">
        <!-- 時間/分鐘圖示 -->
        <Icon name="material-symbols:schedule" class="text-[var(--primary)] text-xl" />
      </div>
      <span class="text-50 text-sm font-medium">{nf.format(minutes)}分</span>
    </div>
  )}
</div>
