---
import type { CollectionEntry } from "astro:content";
import { getPostUrlBySlug } from "@utils/url-utils";
import PostCard from "./PostCard.astro";

const { page } = Astro.props;

let delay = 0;
const interval = 50;
---

<!--
  這一層現在「只負責排列」
  不再是卡片、不給背景、不給圓角
-->
<div class="transition flex flex-col gap-6 mb-6">
    {page.data.map((entry: CollectionEntry<"posts">) => (
        <PostCard
            entry={entry}
            title={entry.data.title}
            published={entry.data.published}
            updated={entry.data.updated}
            url={getPostUrlBySlug(entry.slug)}
            image={entry.data.image}
            description={entry.data.description}
            draft={entry.data.draft}
            pinned={entry.data.pinned}
            class:list="onload-animation"
            style={`animation-delay: calc(var(--content-delay) + ${delay++ * interval}ms);`}
        />
    ))}
</div>
