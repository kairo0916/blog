---
import { Icon } from "astro-icon/components";
import { profileConfig, umamiConfig } from "../../config";
import ImageWrapper from "../misc/ImageWrapper.astro";

const config = profileConfig || {};
const oneLiner = config.oneLiner || config.tagline || config['一句話'] || "";
---
<div class="card-base p-3">
  <!-- 頭像 -->
  <a
    aria-label="Avatar - Kairo Blog"
    href="#"
    class="group block relative mx-auto mt-1 mb-3 max-w-[12rem] h-[12rem] overflow-hidden rounded-xl active:scale-95"
  >
    <div class="absolute inset-0 pointer-events-none transition group-hover:bg-black/30 group-active:bg-black/50 z-10 flex items-center justify-center">
      <Icon name="fa6-regular:address-card" class="text-white text-5xl transition opacity-0 scale-90 group-hover:opacity-100 group-hover:scale-100" />
    </div>

    <ImageWrapper src={config.avatar || ""} alt="Profile Image" class="mx-auto w-full h-full object-cover" />
  </a>

  <!-- 名稱 -->
  <div class="px-2">
    <div class="font-bold text-xl text-center mb-1 dark:text-neutral-50">{config.name}</div>
    <div class="h-1 w-5 bg-[var(--primary)] mx-auto rounded-full mb-2"></div>

    <!-- 描述 -->
    <div class="text-center text-neutral-400 mb-2.5">
      {config.bio}
    </div>

    <!-- 按鈕（保持原樣） -->
    <div class="flex flex-wrap gap-2 justify-center mb-3">
      {config.links && config.links.length > 1 &&
        config.links.map(function (item) {
          return (
            <a rel="me" aria-label={item.name} href={item.url} target="_blank" class="btn-regular rounded-lg h-10 w-10 active:scale-90">
              <Icon name={item.icon} class="text-[1.5rem]" />
            </a>
          );
        })
      }

      {config.links && config.links.length === 1 && (
        <a rel="me" aria-label={config.links[0].name} href={config.links[0].url} target="_blank" class="btn-regular rounded-lg h-10 gap-2 px-3 font-bold active:scale-95">
          <Icon name={config.links[0].icon} class="text-[1.5rem]" />
          {config.links[0].name}
        </a>
      )}
    </div>

    <!-- 內部淺淺分隔線（不把卡片分開） -->
    {oneLiner && (
      <div class="pt-2">
        <div class="mx-4 border-t border-neutral-200/30 dark:border-neutral-700/30"></div>
        <div class="mt-2 text-center text-sm text-neutral-500 dark:text-neutral-400 italic px-3">
          {oneLiner}
        </div>
      </div>
    )}
  </div>
</div>
